# API接口文档

**协议版本：v0.1.0**

**Protocol Version：v0.1.0**

[TOC]

## 综述



## 更新日志

**特别提醒**：所有线上服务，协议版本均应保持版本号前两位为一致的。

**更新原则**：若只发生文档更新，前两位版本号将不发生变化。若接口内容发生变化，协议版本号前两位将会被更新并写入更新日志。

### v0.1.0

初始版本，未发布前版本



## 模糊搜索



## 课表查询

**提示**：当用户查询数据时将自动记录查询的请求数据

### 查询课程信息

* URL：`/course/{学期}/{课程编号]`
* 方式：`GET`
* 说明：
  * 学期格式形如：`2018-2019-1`
  * 课程编号格式：编号包含数字与字母
  * 请求加密：自定义`X-Auth-Token`请求头

* 请求示例：

  ```
  {{host}}/course/2018-2019-1/0D8EAEC14F3E4EE38C039C6072218FA7
  ```

* 响应示例：

  ```
  {
      "1909170222": {
          "name": "",
          "code": "1909170222",
          "class": "",
          "deputy": ""
      },
      "3901160217": {
          "name": "",
          "code": "3901160217",
          "class": "",
          "deputy": ""
      },
      "xxx": {
          "name": "xxx",
          "code": "xxx",
          "class": "xxx",
          "deputy": "xxx"
      },
      ...
      "student": [
          "1909170222",
          "3901160217",
          "xxx",
          ...
      ],
      
      "name": "Web应用开发技术",
      "klass_code": "0D8EAEC14F3E4EE38C039C6072218FA7",
      "room": "世B502",
      "room_code": "2430502",
      "week": [11, 12, 13, 14, 15, 16, 17, 18],
      "lesson": "10506",
      "klass": "软件1701-03",
      "pick": 95,
      "hour": 32,
      "type": "专业选修课",
      
      "teacher": [
          "0000187"
      ],
      "0000187": {
          "name": "外聘1",
          "code": "0000187",
          "title": "教授",
          "unit": "软件学院"
      },
  }
  ```

  

### 查询学生信息

- URL：`/student/{学期}/{学生编号}`
- 方式：`GET`
- 说明：
  - 学期格式形如：`2018-2019-1`
  - 课程编号格式：编号包含数字与字母
  - 请求加密：自定义`X-Auth-Token`请求头

- 请求示例：

  ```
  {{host}}/student/2018-2019-1/3901160407
  ```

- 响应示例：

  ```
  {
      "code": "3901160407",
      "deputy": "计算机学院",
      "klass": "软件1604",
      "name": "詹泽宇",
      "semester_list": [
          "2018-2019-1",
          "2016-2017-1",
          "2016-2017-2",
          "2017-2018-1",
          "2017-2018-2",
          "2018-2019-2"
      ],
      "course": [
          "10B1D23F9CFA4FC6BD885904C07FA7AB",
          "23AA42B2C02544828961859CB0E2F1E2",
          ...
      ],
      "10B1D23F9CFA4FC6BD885904C07FA7AB": {
          "name": "日语（二外）",
          "course_code": "10B1D23F9CFA4FC6BD885904C07FA7AB",
          "room": "世B102",
          "room_code": "2430102",
          "week": [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],
          "lesson": "10102",
          "teacher": [
              {
                  "code": "702134",
                  "name": "金涛",
                  "title": "讲师（高校）"
              }
          ]
      },
      "23AA42B2C02544828961859CB0E2F1E2": {
          "name": "云计算及应用",
          "course_code": "23AA42B2C02544828961859CB0E2F1E2",
          "room": "世B402",
          "room_code": "2430402",
          "week": [11,12,13,14,15,16,17,18],
          "lesson": "30102",
          "teacher": [
              {
                  "code": "212178",
                  "name": "邓磊",
                  "title": "副教授"
              }
          ]
      },
      ...
  }
  ```

### 查询教师信息

- URL：`/teacher/{学期}/{教师编号}`

- 方式：`GET`

- 说明：
  - 学期格式形如：`2018-2019-1`
  - 课程编号格式：编号包含数字与字母
  - 请求加密：自定义`X-Auth-Token`请求头

- 请求示例：

    ```
    {{host}}/teacher/2018-2019-1/3901160407
    ```

- 响应示例：

  ```
  {
      "code": "212178",
      "name": "邓磊",
      "title": "副教授",
      "unit": "软件学院",
      "semester_list": [
          "2018-2019-1",
          "2016-2017-1",
          "2016-2017-2",
          "2017-2018-1",
          "2017-2018-2",
          "2018-2019-2"
      ],
      "course": [
          "12E4C3DCB631491DB7F56F13873349C1",
          "42654979C8F540BA9956AFF401E73F5B",
          ...
      ],
      "12E4C3DCB631491DB7F56F13873349C1": {
          "name": "大型数据库技术",
          "course_code": "12E4C3DCB631491DB7F56F13873349C1",
          "room": "世B402",
          "room_code": "2430402",
          "week": [11,12,13,14,15,16,17,18],
          "lesson": "10102",
          "teacher": [
              {
                  "code": "邓磊",
                  "name": "212178",
                  "title": "副教授"
              }
          ]
      },
      "42654979C8F540BA9956AFF401E73F5B": {
          "name": "云计算及应用",
          "course_code": "42654979C8F540BA9956AFF401E73F5B",
          "room": "世B402",
          "room_code": "2430402",
          "week": [11,12,13,14,15,16,17,18],
          "lesson": "10102",
          "teacher": [
              {
                  "code": "邓磊",
                  "name": "212178",
                  "title": "副教授"
              }
          ]
      },
      
  }
  ```

### 查询教室信息

- URL：`/room/{学期}/{教室编号}`

- 方式：`GET`

- 说明：

  - 学期格式形如：`2018-2019-1`
  - 课程编号格式：编号包含数字与字母
  - 请求加密：自定义`X-Auth-Token`请求头

- 请求示例：

  ```
  {{host}}/room/2018-2019-1/2430402
  ```

- 响应示例：

  ```
  {
      "code": "2430402",
      "name": "世B402",
      "building": "世Ｂ",
      "campus": "铁道校区",
      "course": [
          "F3AA2FE5715C4CDFAAB1DDE56B500097",
          "AABF91ADE89244179D3587BB1CC2DF0E",
          ...
      ],
      "F3AA2FE5715C4CDFAAB1DDE56B500097": {
          "name": "毛泽东思想与中国特色社会主义理论体系概论",
          "course_code": "F3AA2FE5715C4CDFAAB1DDE56B500097",
          "room": "世B402",
          "room_code": "2430402",
          "week": [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],
          "lesson": "10506",
          "teacher": [
              {
                  "code": "119043",
                  "name": "胡厚荣",
                  "title": "高级政工师"
              }
          ]
      },
      "AABF91ADE89244179D3587BB1CC2DF0E": {
          "name": "毛泽东思想与中国特色社会主义理论体系概论",
          "course_code": "AABF91ADE89244179D3587BB1CC2DF0E",
          "room": "世B402",
          "room_code": "2430402",
          "week": [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],
          "lesson": "40506",
          "teacher": [
              {
                  "code": "119043",
                  "name": "胡厚荣",
                  "title": "高级政工师"
              }
          ]
      },
      ...
  }
  ```

## 数据字典

在数据交换的过程中出现的以下键值，可以按照以下解释理解含义。

| 名称   | 含义                     | 类型 |
| ------ | ------------------------ | ---- |
| klass  | ~~非法字段，请反馈~~     |      |
| course | 两个连续的课时           |      |
| class  | 学生所属班级（非行政班） |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |
|        |                          |      |

